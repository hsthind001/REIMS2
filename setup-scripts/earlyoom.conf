# EarlyOOM Configuration for REIMS2
# Apply with: sudo cp earlyoom.conf /etc/default/earlyoom && sudo systemctl restart earlyoom

# Free memory threshold (percentage) - trigger when free RAM drops below this
EARLYOOM_ARGS="-r 10"

# Free swap threshold (percentage) - trigger when free swap drops below this  
EARLYOOM_ARGS="$EARLYOOM_ARGS -s 5"

# Memory report interval (seconds)
EARLYOOM_ARGS="$EARLYOOM_ARGS -m 60"

# Show notifications
EARLYOOM_ARGS="$EARLYOOM_ARGS -n"

# Whitelist critical processes (Docker, PostgreSQL, systemd)
EARLYOOM_ARGS="$EARLYOOM_ARGS --prefer '^(dockerd|containerd|postgres|systemd)'"

# Avoid killing processes matching these patterns
EARLYOOM_ARGS="$EARLYOOM_ARGS --avoid '^(dockerd|containerd|postgres|systemd|kernel)'"

