{
  "master": {
    "tasks": [
      {
        "id": 52,
        "title": "Create Database Schema for Field Metadata",
        "description": "Create a database table to store extraction metadata at the field level.",
        "details": "Create a new table 'extraction_field_metadata' with columns for document ID, table name, record ID, field name, confidence score, extraction engine, conflicting values, resolution method, needs review, review priority, flagged reason, created at, reviewed at, and reviewed by. Implement foreign key constraints and performance indexes. Use Alembic for migrations.",
        "testStrategy": "Run Alembic migrations and verify table creation. Insert sample data and test rollback.",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 53,
        "title": "Create SQLAlchemy Model for Metadata",
        "description": "Develop a SQLAlchemy ORM model for the extraction_field_metadata table.",
        "details": "Create a model class 'ExtractionFieldMetadata' with all necessary columns and relationships to Document and User models. Implement helper methods for retrieving low-confidence fields and fields needing review.",
        "testStrategy": "Test CRUD operations and model import. Verify relationships and helper methods.",
        "priority": "medium",
        "dependencies": [
          52
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 54,
        "title": "Create Base Extractor Abstract Class",
        "description": "Develop an abstract base class for all extraction engines to standardize interfaces.",
        "details": "Create 'BaseExtractor' with abstract methods 'extract' and 'calculate_confidence'. Define 'ExtractionResult' dataclass. Implement helper methods for confidence calculation.",
        "testStrategy": "Verify abstract methods cannot be instantiated. Test import and basic functionality.",
        "priority": "medium",
        "dependencies": [
          53
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 55,
        "title": "Update PyMuPDF Extractor to Use Base Class",
        "description": "Refactor PyMuPDF extractor to inherit from BaseExtractor and return ExtractionResult with confidence scores.",
        "details": "Modify PyMuPDFExtractor to inherit from BaseExtractor. Implement 'extract' to return ExtractionResult and 'calculate_confidence' for text quality. Include metadata like processing time and page count.",
        "testStrategy": "Test extraction on sample PDF and verify confidence scores. Run existing tests to ensure no breakage.",
        "priority": "medium",
        "dependencies": [
          54
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 56,
        "title": "Update PDFPlumber Extractor",
        "description": "Refactor PDFPlumber extractor to inherit from BaseExtractor and enhance table detection.",
        "details": "Modify PDFPlumberExtractor to inherit from BaseExtractor. Implement 'extract' to return ExtractionResult with table detection metadata. Adjust confidence based on table quality.",
        "testStrategy": "Test extraction on sample document and verify confidence scores. Ensure backward compatibility.",
        "priority": "medium",
        "dependencies": [
          54,
          55
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 57,
        "title": "Update Camelot Extractor",
        "description": "Refactor Camelot extractor to use BaseExtractor and handle advanced table parsing.",
        "details": "Modify CamelotExtractor to inherit from BaseExtractor. Implement 'extract' to return ExtractionResult. Convert Camelot accuracy to 0-1 scale and adjust confidence for lattice method.",
        "testStrategy": "Test extraction on sample document and verify confidence scores. Ensure backward compatibility.",
        "priority": "medium",
        "dependencies": [
          54,
          55
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 58,
        "title": "Create Confidence Engine",
        "description": "Develop a service to calculate aggregate confidence across multiple extraction engines and detect conflicts.",
        "details": "Implement 'ConfidenceEngine' with methods 'calculate_field_confidence', 'detect_conflicts', and 'recommend_resolution'. Use weighted voting for confidence calculation.",
        "testStrategy": "Write unit tests for consensus, conflict detection, and weighted voting. Verify confidence bonuses.",
        "priority": "medium",
        "dependencies": [
          55,
          56,
          57
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 59,
        "title": "Create Metadata Storage Service",
        "description": "Develop a service to save extraction metadata to the database after extraction completes.",
        "details": "Implement 'MetadataStorageService' with 'save_field_metadata' method. Handle multiple engine results and flag low-confidence fields. Ensure transaction handling.",
        "testStrategy": "Test metadata saving with mock ExtractionResult objects. Verify transaction rollback on error.",
        "priority": "medium",
        "dependencies": [
          53,
          58
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 60,
        "title": "Integrate Metadata into Extraction Orchestrator",
        "description": "Update the extraction orchestrator to capture metadata after all engines run.",
        "details": "Collect ExtractionResult from all engines in the orchestrator. Use ConfidenceEngine for aggregate scores and MetadataStorageService to save metadata. Ensure transactional integrity.",
        "testStrategy": "Test full extraction flow with metadata capture. Verify metadata is saved and rollback on failure.",
        "priority": "medium",
        "dependencies": [
          55,
          56,
          57,
          58,
          59
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 61,
        "title": "Create Confidence Indicator Frontend Component",
        "description": "Develop a React component to display confidence scores visually.",
        "details": "Create 'ConfidenceIndicator.tsx' to show a horizontal bar with color coding based on confidence score. Implement tooltip for engine and conflict details.",
        "testStrategy": "Test component in Storybook or standalone page. Verify responsiveness and tooltip functionality.",
        "priority": "medium",
        "dependencies": [],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 62,
        "title": "Create Confidence Data Table Component",
        "description": "Develop an enhanced table component to display extracted data with confidence indicators.",
        "details": "Create a React component following existing table patterns to integrate confidence indicators. Ensure compatibility with existing frontend structure.",
        "testStrategy": "Test component integration with sample data. Verify confidence indicators display correctly.",
        "priority": "medium",
        "dependencies": [
          61
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 63,
        "title": "Create Metadata API Endpoints",
        "description": "Develop REST API endpoints for fetching field metadata.",
        "details": "Implement endpoints for fetching field metadata, confidence summary, and marking metadata as reviewed. Ensure endpoints follow RESTful conventions.",
        "testStrategy": "Test API endpoints with sample requests. Verify data retrieval and update operations.",
        "priority": "medium",
        "dependencies": [
          53,
          59
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 64,
        "title": "Update Documents Page with Confidence View",
        "description": "Enhance the Documents page to show confidence indicators and metadata.",
        "details": "Integrate confidence indicators and metadata display into the Documents page. Ensure seamless user experience and data accuracy.",
        "testStrategy": "Test page updates with sample documents. Verify confidence indicators and metadata display correctly.",
        "priority": "medium",
        "dependencies": [
          62,
          63
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 65,
        "title": "Create Pydantic Schemas for Metadata",
        "description": "Develop data validation schemas for API requests and responses.",
        "details": "Create Pydantic schemas for metadata-related API endpoints. Ensure data validation and serialization accuracy.",
        "testStrategy": "Test schema validation with sample data. Verify correct serialization and deserialization.",
        "priority": "medium",
        "dependencies": [
          63
        ],
        "status": "pending",
        "subtasks": []
      }
    ],
    "metadata": {
      "created": "2025-11-09T13:26:50.898Z",
      "updated": "2025-11-11T23:19:25.959Z",
      "description": "Tasks for master context"
    }
  }
}